---
sidebar: sidebar
permalink: second-gen/beegfs-deploy-setting-up-an-ansible-control-node.html
keywords: BeeGFS on NetApp, NetApp Verified Architecture, EF600
summary: "To set up an Ansible control node, identify a virtual or physical machine with network access to the management ports of all file and block nodes that can be used to configure the solution."
---

= Set up an Ansible control node
:hardbreaks:
:nofooter:
:icons: font
:linkattrs:
:imagesdir: ../media/

[.lead]
To set up an Ansible control node, you must designate a virtual or physical machine with network access to the management ports of all file and block nodes designated for deploying the BeeGFS filesystem and HA cluster.

The following steps were tested on Ubuntu 22.04. For steps specific to your preferred Linux distribution, see the https://docs.ansible.com/ansible/latest/installation_guide/intro_installation.html[Ansible documentation^].

. From your Ansible control node, install the following Python and Python Virtual Environment packages.
+
[source,console]
----
sudo apt-get install python3 python3-pip python3-setuptools python3.10-venv
----

. Create a Python virtual environment
+
[source,console]
----
python3 -m venv /root/pyenv
----

. Activate the virtual environment.
+
[source,console]
----
source /root/pyenv/bin/activate
----

. Install the required Python packages within the activated virtual environment.
+
[source,console]
----
pip install ansible netaddr cryptography passlib
----
+
[NOTE]
To ensure that you are installing a supported version of Ansible and all required Python packages, refer to the link:beegfs-technology-requirements.html[Technical requirements].

. Install the BeeGFS collection using Ansible Galaxy.
+
[source,console]
----
ansible-galaxy collection install netapp_eseries.beegfs
----

. Verify that the correct versions of Ansible and Python are installed.
+
....
ansible --version
ansible [core 2.17.2]
  config file = None
  configured module search path = ['/root/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']
  ansible python module location = /usr/local/lib/python3.10/dist-packages/ansible
  ansible collection location = /root/.ansible/collections:/usr/share/ansible/collections
  executable location = /usr/local/bin/ansible
  python version = 3.10.12 (main, Jul 29 2024, 16:56:48) [GCC 11.4.0] (/usr/bin/python3)
  jinja version = 3.1.4
  libyaml = True
....

. Set up passwordless SSH to allow Ansible to access the remote BeeGFS file nodes from the Ansible control node.

.. On the Ansible control node, if needed, generate a pair of public keys using `ssh-keygen`.

.. Set up passwordless SSH to each of the file nodes using `ssh-copy-id <ip_or_hostname>`.
+
[IMPORTANT]]
Do *not* set up passwordless SSH to the block nodes. This is neither supported nor required.
